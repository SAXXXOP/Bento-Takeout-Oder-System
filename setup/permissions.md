# 権限（承認）と実行環境

## 目的
「初回だけ動かない」「トリガーが失敗する」などの原因になりやすい権限周りを整理する。

---

## よく使う権限（例）
- Spreadsheet（読み書き）
- Form（回答取得）
- Drive（バックアップ、ファイルコピー）
- UrlFetch（LINE連携など外部通信）
- Script（トリガー設定やプロパティ）

※ 具体的な権限一覧は、初回実行時に Google が提示する承認画面の内容が正です。

---

## 初回承認の手順（推奨）
1. Apps Script を開く
2. メニュー系やバックアップ系など、実際に使う機能の関数を1つ実行
3. 承認フローを完了
4. その後、フォーム送信テスト（トリガーの前に手動で一度動かすのが安全）

---

## トリガー実行と権限
- トリガーは「設定したユーザー権限」で動きます。
- 別アカウントでテンプレをコピーした場合、**コピー先で承認をやり直す**必要があります。

---

## つまずきポイント
- 「このアプリは確認されていません」表示  
  → Apps Script の標準の承認フローです。店舗内運用の想定なら「詳細」→進むでOK。
- Driveバックアップが失敗する  
  → Drive権限が未承認、または `BACKUP_FOLDER_ID` のフォルダにアクセス権がない。

トラブル時：`troubleshooting/trigger-issues.md` / `troubleshooting/backup-fails.md`
