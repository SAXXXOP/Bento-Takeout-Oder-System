# トリガー設定（フォーム送信 / 日次準備 / バックアップ）

## 目的
必要なトリガーを設定し、手動操作に頼らず運用できる状態にする。

---

## 1) フォーム送信トリガー（必須）
### 何を設定する？
- 関数：`onFormSubmit`
- イベント：フォーム送信時

### 設定手順
1) Apps Script を開く  
2) 左の「トリガー（時計アイコン）」  
3) 「＋トリガーを追加」  
4) 実行する関数：`onFormSubmit`  
5) イベントのソース：フォーム（またはスプレッドシート ※環境により表示が異なる）  
6) イベントの種類：フォーム送信時  
7) 保存 → 権限承認

### 期待結果
- フォーム送信で `注文一覧` に行が追加される

---

## 2) 日次準備トリガー（任意）
### 何を設定する？
- 関数：`dailyPrepTrigger()`
- 実行内容：予約札 + 当日まとめ の作成（運用によっては営業日前日の実行）

### 推奨運用
- まずは手動運用で安定化 → その後に自動化
- 締切（例：前日20:00）の後、店舗の確認タイミングに合わせて実行

### 設定手順（例）
- スプレッドシートメニュー「導入ツール」から設定できる場合はそれを使う  
- ない場合は Apps Script のトリガーで「時間主導型」を追加して `dailyPrepTrigger` を紐づける

---

## 3) バックアップトリガー（任意）
### 何を設定する？
- 関数：`backupSpreadsheetDaily()`
- 前提：`BACKUP_FOLDER_ID` が設定済み

### 推奨運用
- 日次：閉店後など、更新が落ち着いた時間
- 月次運用がある場合は、実装に合わせて有効化

---

## トリガーが動かない時
- まず `ログ` と Apps Script 実行履歴を確認  
- 権限承認が未完了だと失敗しがち  
→ `troubleshooting/logs.md` を参照
