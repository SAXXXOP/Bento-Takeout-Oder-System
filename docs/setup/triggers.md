# トリガー設定（フォーム送信 / 日次準備 / バックアップ）

## 目的
必要なトリガーを設定し、手動操作に頼らず運用できる状態にする。

---

## 1) フォーム送信トリガー（必須）
### 設定内容
- 関数：`onFormSubmit`
- イベント：フォーム送信時

### 手順
1. Apps Script を開く
2. 左の「トリガー（時計アイコン）」
3. 「＋トリガーを追加」
4. 実行する関数：`onFormSubmit`
5. イベントのソース：フォーム（またはスプレッドシート）
6. イベントの種類：フォーム送信時
7. 保存 → 権限承認

---

## 2) 日次準備トリガー（任意）
### 設定内容
- 関数：`dailyPrepTrigger()`
- 目的：予約札 + 当日まとめの自動実行

### 推奨
- まずは手動運用で安定化→その後自動化
- 店舗の確認タイミングに合わせる（例：前日20:50など）

### 設定方法
- 導入ツールメニューがある場合：そちらで設定/削除
- ない場合：時間主導型トリガーで `dailyPrepTrigger` を設定

---

## 3) バックアップトリガー（任意）
- 関数：`backupSpreadsheetDaily()`
- 前提：`BACKUP_FOLDER_ID` 設定済み
- 推奨：閉店後など更新が落ち着いた時間

---

## 動かない時
- まず `ログ` シートと Apps Script 実行履歴
- それでも不明なら DEBUG ログを増やして原因確定

→ `troubleshooting/trigger-issues.md`
