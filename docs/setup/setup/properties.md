# Script Properties 設定・移植（テンプレ→店舗）

## 目的
- 店舗環境に必要な Script Properties を揃える
- テンプレ配布時に「キーは残して値だけ差し替え」できる状態にする

---

## プロパティ一覧（代表）

### LINE連携を使う場合（必須）
- `LINE_TOKEN`：Push等に使用
- `WEBHOOK_KEY`：Webhook URL に `?key=` を必須化する簡易認証キー

### バックアップを使う場合（必須）
- `BACKUP_FOLDER_ID`：バックアップ保存用の親フォルダID

### ログ（推奨）
- `LOG_LEVEL`：ログ出力度合い（例：INFO / DEBUG）
- `LOG_MAX`：ログ最大行数（肥大化対策）

### メニュー表示制御（運用で）
- `MENU_SHOW_*`：普段使わないメニューを隠すためのフラグ群

---

## 設定手順（基本）
1) スプレッドシート → 拡張機能 → Apps Script  
2) 「プロジェクトの設定」→「スクリプト プロパティ」  
3) 必要なキーを追加し、値を入れる

---

## テンプレ配布向け（キーを用意して値はダミー）
テンプレでは「キーを全て作って、値はダミー（空や例示値）」にしておくと安全です。

- テンプレ初期化向け関数がある場合：  
  - `ensureTemplateScriptProperties`：不足キーを作る  
  - `overwriteTemplateScriptProperties`：テンプレ用に値を上書きする  
  ※ 実装に合わせて運用してください

---

## 店舗への「値だけ移植」運用（推奨）
テンプレ→店舗での移植は、次のどちらかが管理しやすいです。

### A. 手入力（最小構成）
- `BACKUP_FOLDER_ID` / `LINE_TOKEN` / `WEBHOOK_KEY` だけ手入力
- 少数店舗ならこれが最速

### B. JSONでエクスポート/インポート（店舗が増えるなら推奨）
- テンプレ側で「キー一覧＋値（ダミー）」を出力  
- 店舗側で「値だけ差し替えたJSON」を取り込み  
- 事故（キー漏れ）を減らせます

> リポジトリにエクスポート/インポート用メニューや関数がある場合は、ここに“実行場所（どのメニューの何）”を追記してください。

---

## トラブル時
- 値が入っているのに動かない → まず `ログ` を見る（`troubleshooting/logs.md`）
- Webhookが弾かれる → `WEBHOOK_KEY` の一致を確認
