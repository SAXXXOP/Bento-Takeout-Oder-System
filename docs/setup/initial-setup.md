# 初期セットアップ（テンプレコピー〜動作確認）

## 目的
テンプレのスプレッドシートをコピーし、フォーム送信→注文一覧記録までを動作させる。

## 前提（このシステムの特徴）
- フォーム送信を起点に `onFormSubmit` が動き、`注文一覧` へ保存する。
- トリガーイベント `e.response` が無い場合でも、スプレッドシートに紐づくフォームURLから「最新回答」を取得して処理できる設計。
- 必須シート名：注文一覧 / 当日まとめ / 予約札 / 顧客名簿 / メニューマスタ / ★要確認一覧 / ログ

---

## 手順

### 1) テンプレのスプレッドシートをコピー
1. テンプレのスプレッドシートを開く
2. 「ファイル」→「コピーを作成」
3. 店舗用の名前（例：`弁当予約管理_店舗名`）で作成

**期待結果**：コピー先にも Apps Script が紐づき、拡張機能→Apps Script で開ける。

---

### 2) フォームとスプレッドシートの紐づけ確認
1. スプレッドシートで「フォームを開く」導線があるか確認
2. ない場合：フォーム側「回答」→「スプレッドシートにリンク」で、このシートに紐づけ直す

**期待結果**：フォームの回答先がこのシートになっている。

---

### 3) 初回実行で権限承認
1. Apps Script を開く
2. 任意の関数を1つ実行（またはスプレッドシート再読み込みで onOpen を走らせる）
3. 承認フローを完了

**期待結果**：以後、実行が「権限不足」で止まらない。

---

### 4) Script Properties を設定（必要な分だけ）
- LINE連携を使う：`LINE_TOKEN`, `WEBHOOK_KEY`
- バックアップを使う：`BACKUP_FOLDER_ID`
- ログを整える：`LOG_LEVEL`, `LOG_MAX_ROWS`

詳しくは：`setup/properties.md`

---

### 5) フォーム送信トリガー（必須）
- 関数：`onFormSubmit`
- イベント：フォーム送信時

詳しくは：`setup/triggers.md`

---

### 6) テスト送信（動作確認）
1. フォームからテスト送信（1件）
2. `注文一覧` に1行追加されるか確認
3. `ログ` シートに記録が残るか確認

**うまくいかない時**：`troubleshooting/logs.md` を最初に参照。
